var chai = require('chai')
chai.should()
var expect = chai.expect

var expr = require('../index')

describe('expr', function () {
  it('parses a subset of javascript expressions', function () {
    var ex = expr('(foo && bar)')
    ex.symbols.should.deep.equal(['foo', 'bar'])
  })
  it('matches booleans', function () {
    var both = expr('foo && bar')
    both.match({foo: true, bar: true}).should.equal(true)
    both.match({foo: true, bar: false}).should.equal(false)
    both.match({foo: false, bar: true}).should.equal(false)
    both.match({foo: false, bar: false}).should.equal(false)
  })
  it('throws if not an expression', function () {
    expect(function () {
      expr('function a () { return 1 }')
    }).to.throw(/expression/i)
  })
})